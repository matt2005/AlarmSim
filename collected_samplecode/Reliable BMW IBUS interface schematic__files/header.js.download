!function(e,n,o){"use strict";var t=o("#header"),r=o(".main-nav"),a=o(".arduino-nav"),s=o(".cart-submenu"),i=o(".nav-left"),l=o("body"),c="https://store.arduino.cc",u=c;function d(e){u=c,"usa"===e&&(u="https://store.arduino.cc/usa"),o("#buy").find("a").attr("href",u),ArduinoAuthHelper.getToken().then(function(e){h(e),g(e)})}var f=function(){l.removeClass("noscroll"),s.hide()},p=function(e){var n={"X-Requested-With":"XMLHttpRequest"};return e&&(n.Authorization="Bearer "+e),n},h=function(e){jQuery.ajax({url:u+"/cart/api/count?ajax=1",xhrFields:{withCredentials:!0},headers:p(e),success:function(e){var n=e.count,o=jQuery("#cart").find(".badge");o.html(n),o.toggle(0<n),0===n&&window.innerWidth<415&&setTimeout(function(){f()},4e3)},error:function(e){console.error(e)}})},g=function(e){jQuery.ajax({url:u+"/cart/api/minicart?ajax=1",xhrFields:{withCredentials:!0},headers:p(e),success:function(e){var n=e.content;s.find(".dropdown-box").html(n)},error:function(e){console.error("Can't fetch cart data"),console.error(e)}})};ArduinoAuthHelper.getOptions().slimHeader&&t.addClass("slim-header"),d(ArduinoGeo.get());var m=window.location.protocol+"//"+window.location.hostname,v=o("#searchform"),w=o("#searchform-mobile");if(-1!==m.indexOf("store")){var b="/catalogsearch/result/",C=o(".eu-africa");"usa"===ArduinoGeo.get()&&(b="/usa/catalogsearch/result/",C=o(".america-asia")),v.attr("action",b),w.attr("action",b),C.show()}else-1!==m.indexOf("blog")?(v.attr("action",m),w.attr("action",m),o(".search-typing").attr("id","s").attr("name","s")):(v.find(".fill-it").val(m),w.find(".fill-it").val(m));var k=AlgoliaHelper.getAlgoliaSearch();if(o(".logo-link").attr("href",m),o(".logo-link-resellers").attr("href",m),k){a.addClass("search-open"),v.find(".search-typing").css("padding-right","30px"),w.find(".search-typing").css("padding-right","7px"),o(".logo-link").css("left","0"),o(".logo-link-resellers").css("left","0"),v.on("click",function(e){e.target===this&&v.submit()}),w.on("click",function(e){e.target===this&&w.submit()});var A=o(".search-typing"),x=o(".clear-icon");A.on("input",function(){x.toggle(!!this.value)}),x.on("touchstart click",function(e){e.preventDefault(),A.val("").trigger("input"),window.searchInput&&window.searchInput.autocomplete.setVal("")})}o("#search-bar").on("click",function(){a.addClass("search-open")}),o("html").on("click",function(e){o(e.target).hasClass("search-typing")||"search-bar"===e.target.id||k||a.removeClass("search-open"),0===o(e.target).parents(".burger-menu").length&&0===o(e.target).parents(".nav-left").length&&(i.removeClass("open"),i.find(".nav-submenu").removeClass("open")),0===o(e.target).parents(".profile-dropdown").length&&0===o(e.target).is(".profile-dropdown")&&o(".profile-dropdown").find(".nav-submenu").removeClass("open")}),o(window).scroll(function(){if(!k){if(a.removeClass("search-open"),ArduinoAuthHelper.getOptions().slimHeader)return;100<o(document).scrollTop()?a.addClass("collapsed"):a.removeClass("collapsed")}}),o(".burger-menu").on("click",function(){i.toggleClass("open"),i.hasClass("open")?l.addClass("noscroll"):l.removeClass("noscroll"),i.find(".nav-submenu").removeClass("open"),o(".profile-dropdown").find(".nav-submenu").removeClass("open")}),o(".nav-left .has-submenu").on("click",function(){i.find(".has-submenu").not(this).find(".nav-submenu").removeClass("open"),o(this).find(".nav-submenu").toggleClass("open"),f()}),o(".profile-dropdown").on("click",function(){o(this).find(".nav-submenu").toggleClass("open"),i.removeClass("open"),l.removeClass("noscroll"),f()}),r.find(".cart-dropdown-trigger").on("click",function(){0<o(".cart-submenu:hidden").length?(l.addClass("noscroll"),s.show(),i.removeClass("open"),o(".profile-dropdown").find(".nav-submenu").removeClass("open"),d(ArduinoGeo.get())):f()}),r.find(".cart-dropdown-trigger").on("mouseleave",function(){f()}),o(".cart-dropdown-trigger").find(".cart-close-button").on("click",function(){f()});var y=o(".quotes-submenu");r.find(".quotes-dropdown-trigger").on("click",function(){0<o(".quotes-submenu:hidden").length?(y.show(),i.removeClass("open"),o(".profile-dropdown").find(".nav-submenu").removeClass("open")):y.hide()}),r.find(".quotes-dropdown-trigger").on("mouseleave",function(){y.hide()}),o(".quotes-dropdown-trigger").find(".cart-close-button").on("click",function(){y.hide()}),o(".store-location-button").find(".cart-close-button").on("click",function(){localStorage.setItem("location-aware",!0)})}(window,document,window.jQuery);